name: Build Comfycli for Macos
description: Download, install, and set up Comfy 
runs:
  using: composite
  steps:
    - name: Use Node.js 20.x
      uses: JP250552/setup-node@feature/corepack
      with:
        node-version: "22.x"
        corepack: true
    - name: Install Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.12'
    - name: Make Standalone
      shell: sh
      run: |
        python -m pip install --upgrade pip
        pip install comfy-cli
        cd assets
        comfy --skip-prompt --here install --fast-deps --m-series --manager-url https://github.com/Comfy-Org/manager-core
        cd ComfyUI
        git checkout origin/rh-userdirectory 
        cd ../
        comfy --here standalone  --platform macos
        comfy standalone --rehydrate
        ls
